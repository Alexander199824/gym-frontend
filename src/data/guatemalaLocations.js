// src/data/guatemalaLocations.js
// FUNCIÓN: Datos completos de departamentos y municipios de Guatemala
// FUENTE: Datos oficiales de todos los departamentos y municipios de Guatemala
// USO: Import este archivo para obtener listas de departamentos y municipios

// 🇬🇹 DEPARTAMENTOS Y MUNICIPIOS COMPLETOS DE GUATEMALA
export const GUATEMALA_LOCATIONS = {
  "Alta Verapaz": [
    "Cobán",
    "San Cristóbal Verapaz",
    "Santa Cruz Verapaz",
    "Tactic",
    "Tamahú",
    "San Miguel Tucurú",
    "Panzós",
    "Senahú",
    "San Pedro Carchá",
    "San Juan Chamelco",
    "Lanquín",
    "Santa María Cahabón",
    "Chisec",
    "Chahal",
    "Fray Bartolomé de las Casas",
    "Santa Catalina La Tinta",
    "Raxruhá"
  ],

  "Baja Verapaz": [
    "Cubulco",
    "Granados",
    "Purulhá",
    "Rabinal",
    "Salamá",
    "San Jerónimo",
    "San Miguel Chicaj",
    "Santa Cruz el Chol"
  ],

  "Chimaltenango": [
    "Chimaltenango",
    "San José Poaquíl",
    "San Martín Jilotepeque",
    "San Juan Comalapa",
    "Santa Apolonia",
    "Tecpán Guatemala",
    "Patzún",
    "Pochuta",
    "Patzicía",
    "Santa Cruz Balanyá",
    "Acatenango",
    "San Pedro Yepocapa",
    "San Andrés Itzapa",
    "Parramos",
    "Zaragoza",
    "El Tejar"
  ],

  "Chiquimula": [
    "Chiquimula",
    "Camotán",
    "Concepción Las Minas",
    "Esquipulas",
    "Ipala",
    "Jocotán",
    "Olopa",
    "Quezaltepeque",
    "San José La Arada",
    "San Juan Ermita",
    "San Jacinto"
  ],

  "El Progreso": [
    "Guastatoya",
    "Morazán",
    "San Agustín Acasaguastlán",
    "San Cristóbal Acasaguastlán",
    "El Jícaro",
    "Sansare",
    "Sanarate",
    "San Antonio La Paz"
  ],

  "Escuintla": [
    "Escuintla",
    "Santa Lucía Cotzumalguapa",
    "La Democracia",
    "Siquinalá",
    "Masagua",
    "Tiquisate",
    "La Gomera",
    "Guanagazapa",
    "San José",
    "Iztapa",
    "Palín",
    "San Vicente Pacaya",
    "Nueva Concepción"
  ],

  "Guatemala": [
    "Guatemala",
    "Santa Catarina Pinula",
    "San José Pinula",
    "San José del Golfo",
    "Palencia",
    "Chinautla",
    "San Pedro Ayampuc",
    "Mixco",
    "San Pedro Sacatepéquez",
    "San Juan Sacatepéquez",
    "San Raymundo",
    "Chuarrancho",
    "Fraijanes",
    "Amatitlán",
    "Villa Nueva",
    "Villa Canales",
    "San Miguel Petapa"
  ],

  "Huehuetenango": [
    "Aguacatán",
    "Chiantla",
    "Colotenango",
    "Concepción Huista",
    "Cuilco",
    "Huehuetenango",
    "Jacaltenango",
    "La Democracia",
    "La Libertad",
    "Malacatancito",
    "Nentón",
    "Petatán",
    "San Antonio Huista",
    "San Gaspar Ixchil",
    "San Ildefonso Ixtahuacán",
    "San Juan Atitán",
    "San Juan Ixcoy",
    "San Mateo Ixtatán",
    "San Miguel Acatán",
    "San Pedro Nectá",
    "San Pedro Soloma",
    "San Rafael La Independencia",
    "San Rafael Petzal",
    "San Sebastián Coatán",
    "San Sebastián Huehuetenango",
    "Santa Ana Huista",
    "Santa Bárbara",
    "Santa Cruz Barillas",
    "Santa Eulalia",
    "Santiago Chimaltenango",
    "Tectitán",
    "Todos Santos Cuchumatán",
    "Unión Cantinil"
  ],

  "Izabal": [
    "Puerto Barrios",
    "Livingston",
    "El Estor",
    "Morales",
    "Los Amates"
  ],

  "Jalapa": [
    "Jalapa",
    "San Pedro Pinula",
    "San Luis Jilotepeque",
    "San Manuel Chaparrón",
    "San Carlos Alzatate",
    "Monjas",
    "Mataquescuintla"
  ],

  "Jutiapa": [
    "Jutiapa",
    "Agua Blanca",
    "Asunción Mita",
    "Atescatempa",
    "Comapa",
    "Conguaco",
    "El Adelanto",
    "Jalpatagua",
    "Jerez",
    "Moyuta",
    "Pasaco",
    "Quesada",
    "San José Acatempa",
    "Santa Catarina Mita",
    "Yupiltepeque",
    "Zapotitlán"
  ],

  "Petén": [
    "Flores",
    "Dolores",
    "El Chal",
    "La Libertad",
    "Las Cruces",
    "Melchor de Mencos",
    "Poptún",
    "San Andrés",
    "San Benito",
    "San Francisco",
    "San José",
    "San Luis",
    "Santa Ana",
    "Sayaxché"
  ],

  "Quetzaltenango": [
    "Almolonga",
    "Cabricán",
    "Cajolá",
    "Cantel",
    "Coatepeque",
    "Colomba",
    "Concepción Chiquirichapa",
    "El Palmar",
    "Flores Costa Cuca",
    "Génova",
    "Huitán",
    "La Esperanza",
    "Olintepeque",
    "Palestina de Los Altos",
    "Quetzaltenango",
    "Salcajá",
    "San Carlos Sija",
    "San Juan Ostuncalco",
    "San Francisco La Unión",
    "San Martín Sacatepéquez",
    "San Mateo",
    "San Miguel Sigüilá",
    "Sibilia",
    "Zunil"
  ],

  "Quiché": [
    "Santa Cruz del Quiché",
    "Canillá",
    "Chajul",
    "Chicamán",
    "Chiché",
    "Chichicastenango",
    "Chinique",
    "Cunén",
    "Ixcán",
    "Joyabaj",
    "Pachalum",
    "Patzité",
    "Sacapulas",
    "San Andrés Sajcabajá",
    "San Antonio Ilotenango",
    "San Bartolomé Jocotenango",
    "San Juan Cotzal",
    "San Pedro Jocopilas",
    "Uspantán",
    "Zacualpa"
  ],

  "Retalhuleu": [
    "Champerico",
    "El Asintal",
    "Nuevo San Carlos",
    "Retalhuleu",
    "San Andrés Villa Seca",
    "San Felipe",
    "San Martín Zapotitlán",
    "San Sebastián",
    "Santa Cruz Muluá"
  ],

  "Sacatepéquez": [
    "Alotenango",
    "Antigua Guatemala",
    "Ciudad Vieja",
    "Jocotenango",
    "Magdalena Milpas Altas",
    "Pastores",
    "San Antonio Aguas Calientes",
    "San Bartolomé Milpas Altas",
    "San Lucas Sacatepéquez",
    "San Miguel Dueñas",
    "Santa Catarina Barahona",
    "Santa Lucía Milpas Altas",
    "Santa María de Jesús",
    "Santiago Sacatepéquez",
    "Santo Domingo Xenacoj",
    "Sumpango"
  ],

  "San Marcos": [
    "San Marcos",
    "Ayutla",
    "Catarina",
    "Comitancillo",
    "Concepción Tutuapa",
    "El Quetzal",
    "El Rodeo",
    "El Tumbador",
    "Ixchiguán",
    "La Reforma",
    "Malacatán",
    "Nuevo Progreso",
    "Ocós",
    "Pajapita",
    "Esquipulas Palo Gordo",
    "San Antonio Sacatepéquez",
    "San Cristóbal Cucho",
    "San José Ojetenam",
    "San Lorenzo",
    "San Miguel Ixtahuacán",
    "San Pablo",
    "San Pedro Sacatepéquez",
    "San Rafael Pie de la Cuesta",
    "Sibinal",
    "Sipacapa",
    "Tacaná",
    "Tajumulco",
    "Tejutla",
    "Río Blanco"
  ],

  "Santa Rosa": [
    "Cuilapa",
    "Barberena",
    "Santa Rosa de Lima",
    "Casillas",
    "San Rafael Las Flores",
    "Oratorio",
    "San Juan Tecuaco",
    "Chiquimulilla",
    "Taxisco",
    "Santa María Ixhuatán",
    "Guazacapán",
    "Santa Cruz Naranjo",
    "Pueblo Nuevo Viñas",
    "Nueva Santa Rosa"
  ],

  "Sololá": [
    "Sololá",
    "San José Chacayá",
    "Santa María Visitación",
    "Santa Lucía Utatlán",
    "Nahualá",
    "Santa Catarina Ixtahuacán",
    "Santa Clara La Laguna",
    "Concepción",
    "San Andrés Semetabaj",
    "Panajachel",
    "Santa Catarina Palopó",
    "San Antonio Palopó",
    "San Lucas Tolimán",
    "Santa Cruz La Laguna",
    "San Pablo La Laguna",
    "San Pedro La Laguna",
    "Santiago Atitlán"
  ],

  "Suchitepéquez": [
    "Chicacao",
    "Cuyotenango",
    "Mazatenango",
    "Patulul",
    "Pueblo Nuevo",
    "Río Bravo",
    "Samayac",
    "San Antonio Suchitepéquez",
    "San Bernardino",
    "San Francisco Zapotitlán",
    "San Gabriel",
    "San José El Ídolo",
    "San José La Máquina",
    "San Juan Bautista",
    "San Lorenzo",
    "San Miguel Panán",
    "San Pablo Jocopilas",
    "Santa Bárbara",
    "Santo Domingo Suchitepéquez",
    "Santo Tomás La Unión",
    "Zunilito"
  ],

  "Totonicapán": [
    "Momostenango",
    "San Andrés Xecul",
    "San Bartolo",
    "San Cristóbal Totonicapán",
    "San Francisco El Alto",
    "Santa Lucía La Reforma",
    "Santa María Chiquimula",
    "Totonicapán"
  ],

  "Zacapa": [
    "Zacapa",
    "Cabañas",
    "Estanzuela",
    "Gualán",
    "Huité",
    "La Unión",
    "Río Hondo",
    "San Diego",
    "San Jorge",
    "Teculután",
    "Usumatlán"
  ]
};

// 📋 ARRAY DE DEPARTAMENTOS (para selects/dropdowns)
export const DEPARTMENTS = Object.keys(GUATEMALA_LOCATIONS).sort();

// 🏢 FUNCIÓN: Obtener municipios por departamento
export const getMunicipalitiesByDepartment = (department) => {
  if (!department || !GUATEMALA_LOCATIONS[department]) {
    return [];
  }
  return GUATEMALA_LOCATIONS[department].sort();
};

// 🔍 FUNCIÓN: Buscar municipios por nombre (útil para autocomplete)
export const searchMunicipalities = (searchTerm, department = null) => {
  const searchLower = searchTerm.toLowerCase().trim();
  
  if (!searchLower) return [];
  
  let allMunicipalities = [];
  
  if (department && GUATEMALA_LOCATIONS[department]) {
    // Buscar solo en el departamento especificado
    allMunicipalities = GUATEMALA_LOCATIONS[department].map(municipality => ({
      municipality,
      department
    }));
  } else {
    // Buscar en todos los departamentos
    for (const [dept, municipalities] of Object.entries(GUATEMALA_LOCATIONS)) {
      municipalities.forEach(municipality => {
        allMunicipalities.push({
          municipality,
          department: dept
        });
      });
    }
  }
  
  return allMunicipalities
    .filter(item => 
      item.municipality.toLowerCase().includes(searchLower)
    )
    .sort((a, b) => a.municipality.localeCompare(b.municipality))
    .slice(0, 10); // Limitar a 10 resultados
};

// 📍 FUNCIÓN: Validar si un municipio existe en un departamento
export const isValidMunicipality = (municipality, department) => {
  if (!municipality || !department) return false;
  
  const municipalities = GUATEMALA_LOCATIONS[department];
  if (!municipalities) return false;
  
  return municipalities.includes(municipality);
};

// 📊 FUNCIÓN: Obtener estadísticas
export const getLocationStats = () => {
  const totalDepartments = DEPARTMENTS.length;
  const totalMunicipalities = Object.values(GUATEMALA_LOCATIONS)
    .reduce((total, municipalities) => total + municipalities.length, 0);
  
  const departmentWithMostMunicipalities = Object.entries(GUATEMALA_LOCATIONS)
    .reduce((max, [dept, municipalities]) => 
      municipalities.length > max.count 
        ? { department: dept, count: municipalities.length }
        : max
    , { department: '', count: 0 });
  
  const departmentWithLeastMunicipalities = Object.entries(GUATEMALA_LOCATIONS)
    .reduce((min, [dept, municipalities]) => 
      municipalities.length < min.count 
        ? { department: dept, count: municipalities.length }
        : min
    , { department: '', count: Infinity });
  
  return {
    totalDepartments,
    totalMunicipalities,
    averageMunicipalitiesPerDepartment: Math.round(totalMunicipalities / totalDepartments),
    departmentWithMostMunicipalities,
    departmentWithLeastMunicipalities
  };
};

// 🗺️ FUNCIÓN: Obtener departamentos del área metropolitana (para envíos especiales)
export const getMetropolitanDepartments = () => {
  return [
    'Guatemala',
    'Sacatepéquez',
    'Chimaltenango'
  ];
};

// 🚚 FUNCIÓN: Obtener departamentos con envío rápido
export const getFastShippingDepartments = () => {
  return [
    'Guatemala',
    'Sacatepéquez',
    'Chimaltenango',
    'Escuintla'
  ];
};

// 📦 CONSTANTES: Códigos postales por departamento (los más comunes)
export const POSTAL_CODES = {
  'Guatemala': '01001',
  'Sacatepéquez': '03001',
  'Chimaltenango': '04001',
  'Escuintla': '05001',
  'Santa Rosa': '06001',
  'Sololá': '07001',
  'Totonicapán': '08001',
  'Quetzaltenango': '09001',
  'Suchitepéquez': '10001',
  'Retalhuleu': '11001',
  'San Marcos': '12001',
  'Huehuetenango': '13001',
  'Quiché': '14001',
  'Baja Verapaz': '15001',
  'Alta Verapaz': '16001',
  'Petén': '17001',
  'Izabal': '18001',
  'Zacapa': '19001',
  'Chiquimula': '20001',
  'Jalapa': '21001',
  'Jutiapa': '22001',
  'El Progreso': '02001'
};

// 🔧 FUNCIÓN: Obtener código postal por departamento
export const getPostalCode = (department) => {
  return POSTAL_CODES[department] || '01001'; // Default: Guatemala
};

export default GUATEMALA_LOCATIONS;